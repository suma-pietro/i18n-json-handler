<!doctypehtml><html lang=en><meta charset=UTF-8><meta content="width=device-width,initial-scale=1"name=viewport><title>i18n Translation Editor with AI</title><meta content="A powerful web-based tool to edit, manage, and translate i18n JSON files. Features a spreadsheet-like interface, resizable columns, and AI-powered translation with Gemini."name=description><meta content="i18n, translation editor, json editor, localization, l10n, internationalization, gemini, ai translation, web tool"name=keywords><script type=application/ld+json>{"@context":"https://schema.org","@type":"SoftwareApplication","name":"i18n Translation Editor with AI","operatingSystem":"Web","applicationCategory":"DeveloperApplication","description":"A powerful web-based tool to edit, manage, and translate i18n JSON files. Features a spreadsheet-like interface, resizable columns, and AI-powered translation with Gemini.","featureList":["Load multiple JSON translation files","Spreadsheet-like editing interface","Resizable columns for better usability","AI-powered translation to new languages","Export updated JSON files","No external CSS/JS libraries for maximum performance","User-provided Gemini API Key"],"offers":{"@type":"Offer","price":"0","priceCurrency":"USD"},"author":{"@type":"Organization","name":"Pietro Suma"}}</script><style>:root{--bg-color:#111827;--text-color:#d1d5db;--primary-color:#7c3aed;--primary-hover:#6d28d9;--secondary-color:#3b82f6;--secondary-hover:#2563eb;--surface-1:#1f2937;--surface-2:#374151;--surface-3:#4b5563;--border-color:#374151;--success-color:#10b981;--text-muted:#9ca3af}*{box-sizing:border-box;margin:0;padding:0}body{font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol";background-color:var(--bg-color);color:var(--text-color);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.container{width:100%;max-width:1280px;margin-left:auto;margin-right:auto;padding:1rem}@media (min-width:640px){.container{padding:1.5rem}}@media (min-width:1024px){.container{padding:2rem}}header{text-align:center;margin-bottom:2rem}header h1{font-size:1.875rem;font-weight:700;color:#fff;margin-bottom:.5rem}@media (min-width:640px){header h1{font-size:2.25rem}}header p{font-size:1.125rem;color:var(--text-muted)}.drop-zone{background-color:var(--surface-1);border:2px dashed var(--surface-3);border-radius:.75rem;padding:2rem;margin-bottom:2rem;text-align:center}.drop-zone label{cursor:pointer}.drop-zone svg{margin:0 auto;height:3rem;width:3rem;color:var(--text-muted)}.drop-zone .label-main{margin-top:.5rem;display:block;font-size:.875rem;font-weight:500;color:var(--text-color)}.drop-zone .label-sub{margin-top:.25rem;display:block;font-size:.75rem;color:var(--text-muted)}.controls{margin-bottom:1.5rem;display:flex;flex-direction:column;justify-content:space-between;align-items:center;gap:1rem}@media (min-width:640px){.controls{flex-direction:row}}.controls .status-message{color:var(--success-color);font-weight:500}.controls .button-group{display:flex;gap:1rem}button{font-weight:700;padding:.5rem 1.5rem;border:none;border-radius:.5rem;transition:background-color .2s ease;cursor:pointer;box-shadow:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -2px rgba(0,0,0,.1);color:#fff}.btn-ai{background-color:var(--primary-color)}.btn-ai:hover{background-color:var(--primary-hover)}.btn-export{background-color:var(--secondary-color)}.btn-export:hover{background-color:var(--secondary-hover)}.btn-secondary{background-color:var(--surface-3)}.btn-secondary:hover{background-color:var(--surface-2)}.table-container{overflow-x:auto;background-color:rgba(31,41,55,.5);border-radius:.5rem;box-shadow:0 10px 15px -3px rgba(0,0,0,.1),0 4px 6px -4px rgba(0,0,0,.1)}.cell-updated{animation:flash-green .7s ease-out}@keyframes flash-green{0%{background-color:var(--success-color)}100%{background-color:transparent}}.resizable-table{table-layout:fixed;width:100%;font-size:.875rem;text-align:left}.resizable-table td,.resizable-table th{padding:.75rem 1rem;border:1px solid var(--border-color);vertical-align:top;word-wrap:break-word;position:relative}.resizable-table th{background-color:var(--surface-2);font-size:.75rem;color:#d1d5db;text-transform:uppercase;letter-spacing:.05em;position:sticky;top:0;z-index:20;overflow:hidden}.resizable-table tbody{background-color:var(--surface-1)}.resizable-table .key-cell{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;color:var(--text-muted)}.resizable-table td[contenteditable=true]:focus{outline:2px solid var(--secondary-color);background-color:var(--bg-color)}.resizer{position:absolute;top:0;right:-2px;width:5px;height:100%;cursor:col-resize;user-select:none;z-index:10}.resizer:hover{background-color:var(--secondary-color)}.modal-overlay{position:fixed;inset:0;background-color:rgba(0,0,0,.7);display:flex;align-items:center;justify-content:center;padding:1rem;z-index:40;transition:opacity .3s ease}.modal-content{background-color:var(--surface-1);border-radius:.5rem;box-shadow:0 20px 25px -5px rgba(0,0,0,.1),0 8px 10px -6px rgba(0,0,0,.1);padding:1.5rem;width:100%;max-width:448px}.modal-content h3{font-size:1.25rem;font-weight:700;margin-bottom:1rem}.modal-content .form-group{margin-bottom:1rem}.modal-content label{display:block;font-size:.875rem;font-weight:500;margin-bottom:.25rem}.modal-content input,.modal-content select{width:100%;background-color:var(--surface-2);border:1px solid var(--border-color);border-radius:.375rem;padding:.5rem;color:var(--text-color)}.modal-content input:focus,.modal-content select:focus{outline:0;border-color:var(--primary-color);box-shadow:0 0 0 2px var(--primary-color)}.modal-footer{margin-top:1.5rem;display:flex;justify-content:flex-end;gap:1rem}.loading-overlay{position:fixed;inset:0;background-color:rgba(0,0,0,.8);display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:50}.spinner{height:4rem;width:4rem;border-radius:50%;border:4px solid var(--surface-2);border-top-color:var(--secondary-color);animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}.loading-overlay p{color:#fff;font-size:1.25rem;margin-top:1rem}.hidden{display:none}</style><div class=container><header><h1>i18n Translation Editor with AI</h1><p>Upload, edit, translate, and export your translation files.</header><div class=drop-zone><label for=jsonFiles><svg fill=none stroke=currentColor viewBox="0 0 48 48"><path d="M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4V12a4 4 0 014-4h12l4 4h12a4 4 0 014 4z"stroke-linecap=round stroke-linejoin=round stroke-width=2 /></svg> <span class=label-main>Drag & drop your .json files here or click to select</span> <span class=label-sub>Multiple file uploads are supported</span></label> <input id=jsonFiles type=file accept=.json class=hidden multiple></div><div class="hidden controls"id=controls><p id=statusMessage class=status-message><div class=button-group><button class=btn-ai id=aiTranslateButton>Translate with AI</button> <button class=btn-export id=exportButton>Export JSON Files</button></div></div><div class=table-container id=tableContainer></div></div><div class="hidden modal-overlay"id=translateModal><div class=modal-content><h3>Translate Column with AI</h3><div class=form-group><label for=sourceLangSelect>Translate from:</label> <select id=sourceLangSelect></select></div><div class=form-group><label for=targetLangInput>Translate to (language code, e.g., "es"):</label> <input id=targetLangInput placeholder=es></div><div class=form-group><label for=apiKeyInput>Your Gemini API Key:</label> <input id=apiKeyInput placeholder="Enter your API key"type=password></div><div class=modal-footer><button class=btn-secondary id=cancelTranslateButton>Cancel</button> <button class=btn-ai id=confirmTranslateButton>Translate</button></div></div></div><div class="hidden loading-overlay"id=loadingOverlay><div class=spinner></div><p id=loadingText>Translating...</div><script>let translations={},languages=[],userApiKey="";const fileInput=document.getElementById("jsonFiles"),tableContainer=document.getElementById("tableContainer"),exportButton=document.getElementById("exportButton"),controlsDiv=document.getElementById("controls"),statusMessage=document.getElementById("statusMessage"),aiTranslateButton=document.getElementById("aiTranslateButton"),translateModal=document.getElementById("translateModal"),sourceLangSelect=document.getElementById("sourceLangSelect"),targetLangInput=document.getElementById("targetLangInput"),apiKeyInput=document.getElementById("apiKeyInput"),cancelTranslateButton=document.getElementById("cancelTranslateButton"),confirmTranslateButton=document.getElementById("confirmTranslateButton"),loadingOverlay=document.getElementById("loadingOverlay"),loadingText=document.getElementById("loadingText");function handleFileSelect(e){const t=e.target.files;if(0===t.length)return;translations={},languages=[],tableContainer.innerHTML='<p style="padding: 2rem; text-align: center;">Processing files...</p>';const n=Array.from(t).map((e=>new Promise(((t,n)=>{const a=e.name.split(".")[0].toLowerCase();if(!a)return n(new Error(`Invalid filename: ${e.name}`));const o=new FileReader;o.onload=o=>{try{t({lang:a,data:JSON.parse(o.target.result)})}catch(t){n(new Error(`Error parsing ${e.name}: ${t.message}`))}},o.onerror=()=>n(new Error(`Error reading ${e.name}`)),o.readAsText(e)}))));Promise.all(n).then((e=>{e.forEach((({lang:e,data:t})=>{languages.push(e),Object.keys(t).forEach((n=>{translations[n]||(translations[n]={}),translations[n][e]=t[n]}))})),languages.sort(),renderTable(),controlsDiv.classList.remove("hidden"),statusMessage.textContent=`${t.length} file(s) loaded successfully.`})).catch((e=>{tableContainer.innerHTML=`<p style="padding: 2rem; text-align: center; color: #f87171;">Error: ${e.message}</p>`,controlsDiv.classList.add("hidden")}))}function renderTable(){const e=Object.keys(translations).sort();if(0===e.length)return void(tableContainer.innerHTML='<p style="padding: 2rem; text-align: center;">No translation keys found.</p>');const t=document.createElement("table");t.className="resizable-table";const n=t.createTHead().insertRow(),a=document.createElement("th");a.textContent="Key",a.style.width="300px",n.appendChild(a),addResizer(a),languages.forEach((e=>{const t=document.createElement("th");t.textContent=e,t.style.width="350px",n.appendChild(t),addResizer(t)}));const o=t.createTBody();e.forEach((e=>{const t=o.insertRow(),n=t.insertCell();n.textContent=e,n.className="key-cell",languages.forEach((n=>{const a=t.insertCell();a.textContent=translations[e][n]||"",a.setAttribute("contenteditable","true"),a.setAttribute("data-key",e),a.setAttribute("data-lang",n)}))})),tableContainer.innerHTML="",tableContainer.appendChild(t)}function handleExport(){languages.forEach((e=>{const t={};Object.keys(translations).forEach((n=>{void 0!==translations[n][e]&&(t[n]=translations[n][e])}));const n=new Blob([JSON.stringify(t,null,2)],{type:"application/json"}),a=URL.createObjectURL(n),o=document.createElement("a");o.href=a,o.download=`${e}.json`,document.body.appendChild(o),o.click(),document.body.removeChild(o),URL.revokeObjectURL(a)}))}function showTranslateModal(){apiKeyInput.value=localStorage.getItem("geminiApiKey")||"",sourceLangSelect.innerHTML="",languages.forEach((e=>{const t=document.createElement("option");t.value=e,t.textContent=e,sourceLangSelect.appendChild(t)})),targetLangInput.value="",translateModal.classList.remove("hidden")}async function startAITranslation(){const e=sourceLangSelect.value,t=targetLangInput.value.trim().toLowerCase(),n=apiKeyInput.value.trim();if(!n)return void alert("Please enter your Gemini API Key.");if(!t)return void alert("Please enter a target language code.");if(languages.includes(t))return void alert(`The language "${t}" is already in the table.`);localStorage.setItem("geminiApiKey",n),userApiKey=n,translateModal.classList.add("hidden"),loadingOverlay.classList.remove("hidden");const a=Object.keys(translations);let o=0;loadingText.textContent=`Translating... (0/${a.length})`;const r=a.map((n=>{const r=translations[n][e]||"";if(!r)return Promise.resolve({key:n,translatedText:""});return callWithBackoff((()=>translateWithGemini(r,e,t))).then((e=>(o++,loadingText.textContent=`Translating... (${o}/${a.length})`,{key:n,translatedText:e}))).catch((e=>(console.error(`Error translating key "${n}":`,e),{key:n,translatedText:`ERROR: ${e.message}`})))}));try{(await Promise.all(r)).forEach((({key:e,translatedText:n})=>{translations[e][t]=n})),languages.push(t),languages.sort(),renderTable(),statusMessage.textContent=`Column "${t}" added successfully.`}catch(e){statusMessage.textContent="An error occurred during translation. Check the console.",console.error("A general error occurred during the translation process:",e)}finally{loadingOverlay.classList.add("hidden")}}async function translateWithGemini(e,t,n){const a={contents:[{role:"user",parts:[{text:`Translate the following text from the language "${t}" to the language "${n}". Do not add any extra comments or explanations, just return the translated text. The text to translate is: "${e}"`}]}]},o=`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${userApiKey}`,r=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!r.ok){const e=await r.text();throw new Error(`API Error: ${r.status} ${r.statusText} - ${e}`)}const s=await r.json();if(s.candidates&&s.candidates.length>0&&s.candidates[0].content.parts.length>0)return s.candidates[0].content.parts[0].text.trim();if(console.warn("Invalid response from Gemini API:",s),s.promptFeedback&&s.promptFeedback.blockReason)throw new Error(`API Blocked: ${s.promptFeedback.blockReason}`);throw new Error("Invalid or empty response from Gemini API.")}async function callWithBackoff(e,t=5){let n=1e3;for(let a=0;a<t;a++)try{return await e()}catch(e){if(a===t-1)throw e;console.log(`API call failed, retrying in ${n}ms...`),await new Promise((e=>setTimeout(e,n))),n*=2}}function addResizer(e){const t=document.createElement("div");t.className="resizer",e.appendChild(t),makeResizable(e,t)}function makeResizable(e,t){let n=0,a=0;const o=t=>{const o=t.clientX-n;e.style.width=`${a+o}px`},r=()=>{document.removeEventListener("mousemove",o),document.removeEventListener("mouseup",r)};t.addEventListener("mousedown",(t=>{t.preventDefault(),n=t.clientX,a=e.getBoundingClientRect().width,document.addEventListener("mousemove",o),document.addEventListener("mouseup",r)}))}fileInput.addEventListener("change",handleFileSelect),exportButton.addEventListener("click",handleExport),aiTranslateButton.addEventListener("click",showTranslateModal),cancelTranslateButton.addEventListener("click",(()=>translateModal.classList.add("hidden"))),confirmTranslateButton.addEventListener("click",startAITranslation),tableContainer.addEventListener("blur",(e=>{const t=e.target;if("TD"===t.tagName&&t.isContentEditable){const e=t.dataset.key,n=t.dataset.lang,a=t.textContent;translations[e][n]!==a&&(translations[e][n]=a,t.classList.add("cell-updated"),setTimeout((()=>t.classList.remove("cell-updated")),700))}}),!0);</script>
